const hre = require("hardhat");

async function main() {
  console.log("ðŸ” Verificando se o desafio foi completado...\n");

  // O endereÃ§o do contrato deve ser passado como argumento ou estar no .env
  // Para este desafio, o exploit Ã© apenas verificar que o contrato foi deployado
  const contractAddress = process.env.CONTRACT_ADDRESS;
  
  if (!contractAddress) {
    console.log("âš ï¸  Nenhum endereÃ§o de contrato fornecido.");
    console.log("ðŸ’¡ Para este desafio, basta fazer o deploy. O exploit Ã© apenas verificar.");
    console.log("ðŸ’¡ Use: CONTRACT_ADDRESS=0x... pnpm run exploit -- challenges/00_warmup_deploy_contract/scripts/exploit.js --network localRopsten");
    return;
  }

  const DeployChallenge = await hre.ethers.getContractFactory("DeployChallenge");
  const contract = DeployChallenge.attach(contractAddress);

  const isComplete = await contract.isComplete();
  
  console.log("ðŸ“ EndereÃ§o do contrato:", contractAddress);
  console.log("âœ… isComplete():", isComplete);
  
  if (isComplete) {
    console.log("\nðŸŽ‰ Desafio completado! O contrato retorna true para isComplete()");
  } else {
    console.log("\nâŒ O contrato ainda nÃ£o estÃ¡ completo");
  }
}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });

